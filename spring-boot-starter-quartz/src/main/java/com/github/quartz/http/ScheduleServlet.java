package com.github.quartz.http;import com.alibaba.fastjson.JSONObject;import com.github.quartz.model.entity.QrtzTimedTask;import org.springframework.util.ObjectUtils;import javax.servlet.ServletException;import javax.servlet.http.HttpServlet;import javax.servlet.http.HttpServletRequest;import javax.servlet.http.HttpServletResponse;import java.io.BufferedReader;import java.io.IOException;import java.io.InputStreamReader;/** * @DESCRIPTION: Quartz提供对外访问接口 * @AUTHER: chenmin * @CREATE BY: 18/1/13 上午10:51 */public class ScheduleServlet extends HttpServlet {    private ScheduleExecutor scheduleExecutor;    public void setScheduleExecutor(ScheduleExecutor scheduleExecutor) {        this.scheduleExecutor = scheduleExecutor;    }    @Override    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        this.doPost(req, resp);    }    @Override    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {        BufferedReader br = new BufferedReader(new InputStreamReader(req.getInputStream(), "UTF-8"));        StringBuilder sb = new StringBuilder();        String line;        while ((line = br.readLine()) != null) {            sb.append(line);        }        QrtzTimedTask qrtzTimedTask = JSONObject.parseObject(sb.toString(), QrtzTimedTask.class);        if (!ObjectUtils.isEmpty(qrtzTimedTask)) {            scheduleExecutor.invoke(qrtzTimedTask);        }    }}