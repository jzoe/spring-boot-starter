package com.quartz.schedule;import com.quartz.config.QuartzProperties;import org.springframework.core.io.ClassPathResource;import org.springframework.core.io.support.EncodedResource;import org.springframework.jdbc.datasource.init.ScriptUtils;import javax.sql.DataSource;import java.sql.SQLException;/** * @DESCRIPTION: 清理Quartz记录的任务 * @AUTHER: chenmin * @CREATE BY: 18/1/12 下午5:32 */public class QuartzInit {    public QuartzInit(QuartzProperties quartzProperties, DataSource dataSource) {        Boolean durability = quartzProperties.getDurability();        if (durability) {            // 任务完成后，允许保留在数据库，不用清理        } else {            // 任务完成后，不允许保留在数据库，需要清理            try {                ClassPathResource classPathResource = new ClassPathResource("cleanTask.sql");                EncodedResource encodedResource = new EncodedResource(classPathResource, "utf-8");                ScriptUtils.executeSqlScript(dataSource.getConnection(), encodedResource);            } catch (SQLException e) {            }        }    }}